# âœ… Replit Agent Prompt â€” Smart Non-Destructive Enhancements

ðŸŽ¯ Objective:
Upgrade the current AI trading system by adding adaptive logic to reduce BUY bias during bear markets, introduce proper SELL signal generation, and implement a feedback-based self-assessment layer â€” all without altering the existing ML models or core trading loop.

---

ðŸ“ˆ PART 1: Market Context-Aware BUY Filtering

â€¢ Update `ai/market_regime_detector.py`:
  - Use a combination of ADX, MACD trend slope, and EMA angle to determine market regime
  - If market is bearish â†’ reduce confidence score of BUY signals by 20%
  - If sideways â†’ discard signals with confidence < 75%

â€¢ Modify `ai/signal_filter.py`:
  - Apply a â€œmarket context penaltyâ€ layer
  - Block long entries during bear trend unless confidence > 80%

---

ðŸ“‰ PART 2: SELL Signal Generation Module

â€¢ Add new file: `ai/sell_signal_generator.py`:
  - Generate SELL signals using:
    - Negative MACD cross
    - RSI < 40
    - EMA50 downward cross
  - Add optional trailing stop exit on profitable trades

â€¢ Connect SELL signals to the execution engine with identical confidence filtering logic

---

ðŸ“Š PART 3: Feedback Learning (Performance Self-Awareness)

â€¢ Create: `feedback/feedback_logger.py`
  - Log every executed trade with:
    - Signal ID, confidence, market regime, result (win/loss), timing
  - Save to SQLite or CSV format for weekly analysis

â€¢ Create: `feedback/feedback_analyzer.py`
  - Analyze which signals consistently fail/succeed
  - Derive human-readable rules like:
    - â€œAvoid MACD cross signals when volume < averageâ€
    - â€œReduce confidence if RSI is between 45â€“55 in sideways marketsâ€

---

ðŸ§  PART 4: Dashboard Enhancement (Insight Layer)

â€¢ Add a new tab or widget called **"AI Insights"**
  - Display current detected market regime
  - Show recent signal accuracy over last 25 trades
  - Alert if BUY/SELL ratio is skewed (e.g. 90% BUYs)
  - Visualize system confidence and execution success rate

---

âš ï¸ Note:
DO NOT touch existing ML models (Random Forest, Gradient Boosting, etc.)
DO NOT modify execution flow or database schema
Only use modular wrappers and new files in `ai/`, `feedback/`, and `dashboard/`